import { Widget as WidgetConfig, TableListConfig, ZeroStateReason } from '@al/ng-visualizations-components';
import { ExposuresQueryResponse } from '@al/assets-query';

export const impactfulRemediations = (response: ExposuresQueryResponse, item?: WidgetConfig) => {
  const tableConfig: TableListConfig = {
    headers: [
      { name: 'Name', field: 'summary', class: 'left multiline-content' },
      { name: 'Asset Count', field: 'count', class: 'right' }
    ],
    body: []
  };
  const assets = response.remediations.assets;
  if(assets.length === 0) {
    return {
      nodata: true,
      reason: ZeroStateReason.Zero
    };
  }

  tableConfig.body = assets.map(asset => ({
    summary: asset.name,
    count: asset.asset_count,
    recordLink: {
      remediationId: asset.remediation_id
    }
  }));
  return tableConfig;
};
