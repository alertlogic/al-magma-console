<div class="al-expandable-menu">
    <ng-content></ng-content>
    <div *ngFor="let group of data.groups"
        [ngClass]="{ 'no-last-expandable-menu': !group.last}">
        <h2 fxLayout="row"
            class="title-content-expandable-menu"
            *ngIf="group.items.length > 0"
            (id)="id"
            (click)="toggleGroup(group.key)"
            [ngClass]="{ 'opened-expandable-menu': group.opened, 'closed-expandable-menu': !group.opened, 'clickable-expandable-menu': group.clickable }"
            [attr.data-index]="group.key">
            <div fxFlex
                 class="label-expandable-menu">
                {{ group.title }}
            </div>
            <i class="material-icons">{{ group.arrow }}</i>
        </h2>
        <div class="content-expandable-menu"
             *ngIf="group.visible && group.items.length>0"
             [ngClass]="{ 'open-expandable-menu': group.opened, 'close-expandable-menu': !group.opened }">
            <div class="group-expandable-menu"
                 *ngFor="let item of group.items">
                <div class="item-expandable-menu"
                     *ngIf="item.visible"
                     [ngClass]="{ 'selected-expandable-menu': highlightSelectedItems(item.key), 'clickable-expandable-menu': (enableClickNavigation && item.clickable), 'hover-highlight-expandable-menu': (enableHoverHighlight && !highlightSelectedItems(item.key)) }"
                     fxLayout="row"
                     (click)="clickItem(group.key, item.key)">
                    <span fxFlex>{{ item.title }}</span>
                </div>
            </div>
        </div>
        <div fxLayout="row"
             class="lonelyItem-expandable-menu"
             *ngIf="group.items.length === 0">
            <div fxFlex
                 class="label-expandable-menu"
                 [ngClass]="{ 'selected-expandable-menu': highlightSelectedItems(group.key), 'clickable-expandable-menu': (enableClickNavigation && group.clickable), 'hover-highlight-expandable-menu': (enableHoverHighlight && !highlightSelectedItems(group.key)) }"
                 (click)="clickItem(null, group.key)">
                {{ group.title }}
            </div>
        </div>
    </div>
    <ng-content select="al-expandable-menu-footer"></ng-content>
</div>